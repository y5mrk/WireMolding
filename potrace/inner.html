<!DOCTYPE html>
<!-- saved from url=(0056)http://defghi1977.html.xdomain.jp/tech/img2svg/inner.htm -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<style type="text/css">
body{
	font-size:14px;
	margin:0;
	font-family:sans-serif;
}
#dialog{
	position:absolute;
	left:0;
	top:0;
	width:100%;
	height:100%;
	display:none;
	background-color:rgba(255,255,255,0.9);
}
fieldset{
	width:376px;
	margin:100px auto;
	padding:10px;
	border:1px lightgray solid;
	float:left;
	border-radius:5px;
	border:none;
	box-shadow:0 2px 3px black;
	background-color:rgba(0,0,255,0.1);
	position:relative;
}
legend{
	padding:2px 10px;
	text-shadow: 1px 1px rgba(128,128,128,0.5);
	border-radius:8px;
	box-shadow:0 1px 1px 1px rgba(0,0,0,0.4);
	background-color:inherit;
}
fieldset>div{
	height:29px;
	line-height:29px;
	position:relative;
}
fieldset>div>label:first-child{
	width:70px;
	display:inline-block;
}
svg *{
	pointer-events:all;
}
#pnlColor>input:nth-of-type(2){
	margin-left:65px;
}
#color{
	position:absolute;
	top:0;
	left:70px;
	width:60px;
}
#btnClose{
	position:absolute;
	right:5px;
	top:0;
	height:20px;
	width:20px;
	padding:0;
}
#btnColor input[type="button"]{
	width:15px;
}
	</style>
	<style id="cssSvg" type="text/css">
svg{
	width:400px;
	height:400px;
	overflow:hidden;
}
	</style>
	    <script src="../js/home.js"></script>
<!-- <script type="text/javascript">
window.onload = function(){

	(function(){
		//dragイベントを無効に
		document.body.addEventListener("dragstart", function(e){
			e.preventDefault();
		}, true);
		document.body.addEventListener("drag", function(e){
			e.preventDefault();
		}, true);
		document.body.addEventListener("dragover", function(e){
			e.preventDefault();
		}, true);
		document.body.addEventListener("dragenter", function(e){
			e.preventDefault();
		}, true);
		document.body.addEventListener("dragleave", function(e){
			e.preventDefault();
		}, true);
		document.body.addEventListener("drop", function(e){
			e.preventDefault();
		}, true);
		document.body.addEventListener("dragend", function(e){
			e.preventDefault();
		}, true);
	})();

	(function(){
		var t;
		document.body.addEventListener("mousedown", function(e){
			var elem = e.target;
			if((elem instanceof HTMLElement) || (elem instanceof SVGSVGElement)){
				return;
			}
			var transforms = elem.transform.baseVal;
			var transform;
			try{
				transform = transforms.getItem(0);
			}catch(e){
				transform = elem.ownerSVGElement.createSVGTransform();
				transforms.appendItem(transform);
			}
			var matrix = transform.matrix;
			t = {
				elem: elem,
				x: e.pageX,
				y: e.pageY,
				matrix: matrix,
				e: matrix.e,
				f: matrix.f,
				rate: getRate()
			};
			this.style.cursor = "move";
		}, false);

		document.body.addEventListener("mousemove", function(e){
			if(!t){return;};
			var x = (e.pageX - t.x) * t.rate + t.e;
			var y = (e.pageY - t.y) * t.rate + t.f;
			if(x == 0 && y == 0){return;}
			t.matrix.e = x;
			t.matrix.f = y;
		}, false);

		document.body.addEventListener("mouseup", function(e){
			t = undefined;
			this.style.cursor = "auto";
		}, false);

		function getRate(){
			var svg = document.getElementsByTagName("svg")[0];
			var w = svg.width.baseVal.value;
			var h = svg.height.baseVal.value;
			return w > h ? w/400 : h/400;
		}

	})();

	document.body.addEventListener("dblclick", function(e){
		var elem = e.target;
		if((elem instanceof HTMLElement) || (elem instanceof SVGSVGElement)){
			return;
		}
		showDialog(elem);
	}, false);

	var showDialog = (function(){
		var elem;
		btnClose.onclick = function(){
			closeDialog();
		};

		btnColor.onclick = function(){
			elem.setAttribute("fill", color.value);
			addColor(color.value);
			closeDialog();
		};

		btnNone.onclick = function(){
			elem.removeAttribute("fill");
			closeDialog();
		};

		btnDelete.onclick = function(){
			if(!confirm("要素を削除します．よろしいですか？")){return;}
			elem.parentNode.removeChild(elem);
			closeDialog();
		};

		btnPos.onclick = function(){
			elem.setAttribute("transform", "");
			closeDialog();
		};

		colors.addEventListener("click", function(e){
			var target = e.target;
			if(!(target instanceof HTMLInputElement)){
				return;
			}
			elem.setAttribute("fill", target.style.backgroundColor);
			closeDialog();
		}, false);

		function setElem(e){
			elem = e;
			color.value = e.getAttribute("fill");
		};

		return function(e){
			elem = e;
			setElem(e);
			dialog.style.display = "block";
		};
	})();

	window.closeDialog = function(){
		dialog.style.display = "none";
	};

	window.addColor = function(color){
		if(dialog.style.display == "none"){
			return;
		}
		var buttons = colors.getElementsByTagName("input");
		var button;
		for(var i = 0, len = buttons.length; i<len; i++){
			button = buttons[i];
			if((button.style.backgroundColor+"") == (color+"")){
				return;
			}
		}
		if(buttons.length > 10){
			colors.removeChild(buttons[0]);
		}
		button = document.createElement("input");
		button.type = "button";
		button.value = " ";
		button.style.backgroundColor = color;
		colors.appendChild(button);
	};

	window.isDioalogShown = function(){
		return dialog.style.display != "none";
	};

	document.body.addEventListener("mousemove", function(e){
		if(!window.parent){
			return;
		}
		window.parent.setLoupePosition(e.pageX + 400, e.pageY);
	}, false);
};
</script> -->
	</head>
	<body>
		<div id="svgContainer">
			<svg width="200" height="200" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">
			</svg>
		</div>
		<div id="dialog">
			<fieldset>
				<legend>要素の編集</legend><input type="button" value="☓" id="btnClose">
				<div id="pnlColor">
					<label>塗りの色</label>
					<input type="color" id="color">
					<input type="button" value="設定" id="btnColor"><input type="button" value="none" id="btnNone" title="none">

				</div>
				<div id="colors">
					<label>&nbsp;</label>
				</div>
				<div>《ソース画像をクリックして色を取り出せます．》</div>
				<div>
					<label>操作</label><input type="button" value="位置を戻す" id="btnPos"><input type="button" value="要素の削除" id="btnDelete">
				</div>
			</fieldset>
		</div>


</body></html>
